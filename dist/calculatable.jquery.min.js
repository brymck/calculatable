/* Calculatable v0.0.1 | (c) 2014-2014 by Bryan McKelvey | MIT License, https://github.com/brymck/calculatable/blob/master/LICENSE */

var Keybindings,emacs,vim,__hasProp={}.hasOwnProperty;Keybindings=function(){function a(a){null==a&&(a=function(){return{}}),this.options=a.apply(this)}var b,c,d,e,f,g,h,i,j,k;for(b={8:"BS",9:"Tab",13:"Enter",27:"Esc",37:"Down",38:"Up",39:"Right",40:"Left"},j=[[49,50,51,52,53,54,55,56,57],function(){for(k=[],f=65;90>=f;f++)k.push(f);return k}.apply(this)],e=0,h=j.length;h>e;e++)for(d=j[e],g=0,i=d.length;i>g;g++)c=d[g],b[c]=String.fromCharCode(c);return a.prototype.applyTo=function(a){var b,c,d,e;d=this.options,e=[];for(c in d)__hasProp.call(d,c)&&(b=d[c],e.push(a.on("keydown",c,function(a){return function(c){var d,e;return e=a.toKeystring(c),d=b[e],null!=d?(c.preventDefault(),d.call(a,$(c.target))):void 0}}(this))));return e},a.prototype.moveLeft=function(a){return this._focus(a.parent().prevAll(":has(input)"))},a.prototype.moveRight=function(a){return this._focus(a.parent().nextAll(":has(input)"))},a.prototype.moveDown=function(a){var b,c,d;return c=a.parent(),d=c.parent().next(),null!=d?(b=c.prevAll().length,this._focus(d.children().eq(b))):void 0},a.prototype.moveUp=function(a){var b,c,d;return c=a.parent(),d=c.parent().prev(),null!=d?(b=c.prevAll().length,this._focus(d.children().eq(b))):void 0},a.prototype.paste=function(a){return a},a.prototype.toKeystring=function(a){var c,d;return c=b[a.which],null==c?null:(d="",a.metaKey&&(d+="M-"),a.ctrlKey&&(d+="C-"),a.altKey&&(d+="A-"),a.shiftKey&&(d+="S-"),d+c)},a.prototype._focus=function(a){return a.first().children("input").focus().select()},a}(),emacs=new Keybindings(function(){return{input:{"C-B":this.moveLeft,"C-F":this.moveRight,"C-N":this.moveDown,"C-P":this.moveUp,"C-V":this.paste}}}),vim=new Keybindings(function(){return{td:{H:this.moveLeft,L:this.moveRight,J:this.moveDown,K:this.moveUp,P:this.paste}}});var $,Calculatable;$=jQuery,$.fn.extend({calculatable:function(a){return this.each(function(){var b,c;return b=$(this),c=b.data("calculatable"),c instanceof Calculatable?void 0:b.data("calculatable",new Calculatable(b,a))})}}),Calculatable=function(){function Calculatable(a,b){this.options=null!=b?b:{},this.$table=$(a),this.setDefaultValues()}return Calculatable.prototype.setDefaultValues=function(){return this.keybindings=!1},Calculatable.prototype.keys=function(){return this.$table.find("thead tr th").map(function(a){return function(b,c){return a._camelCase($(c).text())}}(this))},Calculatable.prototype.serialize=function(){var a;return a=this.keys(),this.$table.find("tbody tr").map(function(b,c){var d,e,f,g,h,i;for(g=$(c).find("td").map(function(a,b){return $(b).find("input").val()}),d={},e=h=0,i=a.length;i>h;e=++h)f=a[e],d[f]=g[e];return d})},Calculatable.prototype._camelCase=function(a){return a=a.charAt(0).toLowerCase()+a.slice(1),a.replace(/\s+/g,"")},Calculatable}();
//# sourceMappingURL=calculatable.jquery.min.js.map